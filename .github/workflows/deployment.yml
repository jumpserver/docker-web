name: Build test

on:
  push:
    branches:
      - pr@*
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3

    - name: Create Folder
      run: |
        mkdir -p release/lina release/luna

    - name: Build Docker Image
      uses: ilteoood/docker_buildx@master
      with:
        imageName: jumpserver/web
        dockerFile: Dockerfile

    - uses: LouisBrunner/checks-action@master
      if: always()
      with:
        sha: ${{ github.sha }}
        token: ${{ secrets.GITHUB_TOKEN }}
        name: Check Build Job
        conclusion: ${{ job.status }}
        output: |
          {"summary":""}
